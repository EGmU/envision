{"version":3,"sources":["popover.js"],"names":["Popover","$","NAME","IDENTIFIER","EVENT_NAMESPACE","NO_CONFLICT","fn","CLASS_PREFIX","attachmentMapping","top","bottom","left","right","offsetMapping","DEFAULTS","placement","constraints","container","content","escapeContent","customOffset","undefined","template","title","trigger","element","config","el","$el","extend","data","bindEvents","triggers","split","forEach","on","isShowing","hide","show","hoverTrigger","inEvent","outEvent","getPopoverElement","$popoverElement","setText","selector","text","find","setTitle","setContent","setArrowPosition","addClass","_getOffset","detach","append","_tether","Tether","attachment","target","classes","enabled","classPrefix","offset","addTargetClasses","position","destroy","removeData","_jQuery","each","$this","test","method","Error","call","Constructor","noConflict","jQuery"],"mappings":"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","file":"../../js/popover.js","sourcesContent":["const Popover = (($) => {\n\n   const NAME = 'popover';\n   const IDENTIFIER = 'sv.popover';\n   const EVENT_NAMESPACE = `.${IDENTIFIER}`;\n   const NO_CONFLICT = $.fn[NAME];\n   const CLASS_PREFIX = 'sv-tether';\n\n   const attachmentMapping = {\n      top: 'bottom center',\n      bottom: 'top center',\n      left: 'middle right',\n      right: 'middle left'\n   };\n\n   const offsetMapping = {\n      top: '10 0',\n      bottom: '-10 0',\n      left: '0 10',\n      right: '0 -10'\n   };\n\n   const DEFAULTS = {\n      placement: 'top',\n      constraints: [],\n      container: 'body',\n      content: '',\n      escapeContent: true,\n      customOffset: undefined,\n      placement: 'top',\n      template: `<div class=\"sv-popover\" role=\"tooltip\">\n                  <div class=\"sv-popover__arrow\"></div>\n                  <div class=\"sv-popover__header\">\n                     <h3 class=\"sv-popover__header__title\"></h3>\n                  </div>\n                  <div class=\"sv-popover__content\"></div>\n               </div>`,\n      title: '',\n      trigger: 'click'\n   };\n\n   class Popover {\n\n      constructor(element, config) {\n         this.el = element;\n         this.$el = $(this.el);\n         this.config = $.extend({}, DEFAULTS, this.$el.data(), config);\n\n         this.bindEvents();\n      }\n\n      bindEvents() {\n         const triggers = this.config.trigger.split(' ');\n\n         triggers.forEach((trigger) => {\n            if (trigger === 'click') {\n               this.$el.on(this.config.trigger + EVENT_NAMESPACE, () => {\n                  if (this.isShowing) {\n                     this.hide();\n                  } else {\n                     this.show();\n                  }\n               });\n            } else {\n               const hoverTrigger = trigger === 'hover';\n               const inEvent = hoverTrigger ? 'mouseenter' : 'focusin';\n               const outEvent = hoverTrigger ? 'mouseleave' : 'focusout';\n\n               this.$el\n                  .on(inEvent + EVENT_NAMESPACE, () => {\n                     if (!this.isShowing) {\n                        this.show();\n                     }\n                  })\n                  .on(outEvent + EVENT_NAMESPACE, () => {\n                     if (this.isShowing) {\n                        this.hide();\n                     }\n                  });\n            }\n         });\n      }\n\n      getPopoverElement() {\n         return this.$popoverElement = this.$popoverElement || $(this.config.template);\n      }\n\n      setText($popoverElement, selector, text) {\n         $popoverElement.find(selector)[this.config.escapeContent ? 'text' : 'html'](text);\n      }\n\n      setTitle($popoverElement) {\n         this.setText($popoverElement, '.sv-popover__header__title', this.config.title);\n      }\n\n      setContent($popoverElement) {\n         this.setText($popoverElement, '.sv-popover__content', this.config.content);\n      }\n\n      setArrowPosition($popoverElement) {\n         $popoverElement.find('.sv-popover__arrow')\n            .addClass(`sv-popover__arrow--${this.config.placement}`);\n      }\n\n      _getOffset() {\n         return this.config.customOffset || offsetMapping[this.config.placement];\n      }\n\n      hide() {\n         const $popoverElement = this.getPopoverElement();\n\n         $popoverElement.detach();\n         this.isShowing = false;\n      }\n\n      show() {\n         const $popoverElement = this.getPopoverElement();\n\n         this.setTitle($popoverElement);\n         this.setContent($popoverElement);\n         this.setArrowPosition($popoverElement);\n\n         $('body').append($popoverElement);\n\n         this._tether = new Tether({\n            attachment        : attachmentMapping[this.config.placement],\n            element           : $popoverElement,\n            target            : this.el,\n            classes           : { element: false, enabled: false },\n            classPrefix       : CLASS_PREFIX,\n            offset            : this._getOffset(),\n            constraints       : this.config.constraints,\n            addTargetClasses  : false\n        });\n\n        this._tether.position();\n\n        this.isShowing = true;\n      }\n\n      destroy() {\n         this.hide();\n\n         this.$popoverElement = undefined;\n         this._tether = undefined;\n         this.isShowing = false;\n         this.$el.removeData(IDENTIFIER);\n      }\n\n      static _jQuery(config) {\n         return this.each(function() {\n            const $this = $(this);\n            let data = $this.data(IDENTIFIER);\n\n            if (!data && /destroy|hide/.test(config)) {\n               return;\n            }\n\n            if (!data) {\n               data = new Popover(this, typeof config === 'object' ? config : null);\n               $this.data(IDENTIFIER, data);\n            }\n\n            if (typeof config === 'string') {\n               const method = data[config];\n\n               if (!method) {\n                  throw new Error(`Invalid method name \"${config}\"`);\n               }\n\n               method.call(data);\n            }\n         });\n      }\n   };\n\n   $.fn[NAME] = Popover._jQuery;\n   $.fn[NAME].Constructor = Popover;\n   $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = NO_CONFLICT;\n      return Popover._jQuery;\n   };\n\n   return Popover;\n\n})(jQuery);\n\nexport default Popover;\n"]}